#!/bin/bash
egrep "(temp|Cpu|free)" $1 | sed "s/\([^ ]*\) \([^(]*\).*temp=\([^']*\)[^=]*=\(.*\)/\1,\2,\3,\4/;s/\(%Cpu([^:]*\):[ ]*\([^ ]*\)[^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\).*/,,,,,,,,,,,,,\1,\2,\3,\4,\5,\6,\7,\8,\9/;s/\(%Cpu[^(][^:]*\):[ ]*\([^ ]*\)[^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\).*/,,,,,,,,,,,,,\1,,,,,,,,,\2,\3,\4,\5,\6,\7,\8,\9/;s/\(.*Mem[^:]*\):[ ]*\([^ ]*\)[^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\).*/,,,,\1,\2,\3,\4,\5/;s/\(.*Swap[^:]*\):[ ]*\([^ ]*\)[^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\) [^0-9]*\([^ ]*\).*/,,,,\1,,,,,\2,\3,\4,\5/"
